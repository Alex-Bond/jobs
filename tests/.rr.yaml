jobs:
  # worker pool configuration
  workers:
    command: "php handler.php"
    pool:
      numWorkers: 1
      maxJobs:    1

  # broker configuration
  brokers:
    beanstalk:
      address: tcp://localhost:11300

    amqp:
      url: "amqp://user:password@127.0.0.1:5672/"

  # list of broker pipelines associated with endpoints
  pipelines:
    - broker: local
      listen: true
      handle:
        - "spiral.jobs.tests.local"

    - broker: beanstalk
      listen: true
      options:
        tube:    default
        threads: 1
      handle:
        - "spiral.jobs.tests.beanstalk*"

    - broker: amqp
      listen: true
      handle:
        - "spiral.jobs.tests.rabbit*"

