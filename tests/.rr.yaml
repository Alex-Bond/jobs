jobs:
  # worker pool configuration
  workers:
    command: "php handler.php"
    pool:
      numWorkers: 4

  # beanstalk configuration
  beanstalk:
    address:  tcp://localhost:11300
    reserve:  1

  # amazon sqs configuration
  amazon:
    region:   us-west-1
    key:      api-key
    secret:   api-secret
    endpoint: http://localhost:9324

  # list of broker pipelines associated with endpoints
  pipelines:
    #- name:   green
    #  broker: amazon
    ##  queue:  default
    #  options:
    #    MessageRetentionPeriod: 86400

    #- name:   purple
    ##  broker: beanstalk
    #  tube:   default

    - name:   default
      broker: local

  # default destinations for jobs
  mapping:

    green:
      - "spiral.jobs.tests.sqs.*"

    purple:
      - "spiral.jobs.tests.beanstalk.*"

    default:
      - "spiral.jobs.tests.local.*"

  # list of pipelines to be consumed by the server, keep empty if you want to start consuming manually
  consume:
    - default
    - purple
    - green