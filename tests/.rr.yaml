jobs:
  # worker pool configuration
  workers:
    command: "php handler.php"
    pool:
      numWorkers: 4

  # rabbitmq and similar servers
  amqp:
    addr: amqp://guest:guest@localhost:5672/

  # beanstalk configuration
  beanstalk:
    addr:    tcp://localhost:11300
    reserve: 1

  # amazon sqs configuration
  sqs:
    key:      api-key
    secret:   api-secret
    region:   us-west-1
    endpoint: http://localhost:9324

  # list of broker pipelines associated with endpoints
  pipelines:
    - name:   local
      broker: local

    - name:   amqp
      broker: amqp

    - name:   beanstalk
      broker: beanstalk
      tube:   default

    - name:   sqs
      broker: sqs
      queue:  default
      declare:
        MessageRetentionPeriod: 86400

  # default destinations for jobs
  mapping:
    local:     ["spiral.jobs.tests.local.*"]
    amqp:      ["spiral.jobs.tests.amqp.*"]
    beanstalk: ["spiral.jobs.tests.beanstalk.*"]
    sqs:       ["spiral.jobs.tests.sqs.*"]

  # list of pipelines to be consumed by the server, keep empty if you want to start consuming manually
  consume: [local, amqp, beanstalk, sqs]